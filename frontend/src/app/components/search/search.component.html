<div class="searchBar">
  <input type="text" [(ngModel)]="name" placeholder="Search" name="name">
  <button class="clearIcon" mat-button *ngIf="name !== ''" matSuffix mat-icon-button (click)="name = ''; navigateTo()"><mat-icon>clear</mat-icon></button>
  <button mat-button class="searchButton" (click)="navigateTo()"><mat-icon>search</mat-icon>Search</button>
</div>

<div class="container">
  <div class="bigFilter">
    <div class="filterOptions">
      <mat-form-field>
        <mat-label>Select Product Category</mat-label>
        <mat-select [(ngModel)]="category" (selectionChange)="navigateTo()" value="category">
          <mat-option [value]="">None</mat-option>
          <mat-option *ngFor="let category of categories" [value]="category.value">{{category.viewValue}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <input matInput class="priceInput" [(ngModel)]="priceMin" (keyup)="checkPrice(priceMin)" placeholder="min Price">
        <button class="clearIcon" mat-button *ngIf="priceMin !== null && priceMin !== ''" matSuffix mat-icon-button (click)="priceMin = null; navigateTo()"><mat-icon>close</mat-icon></button>
      </mat-form-field>
      <mat-form-field>
        <input matInput class="priceInput" [(ngModel)]="priceMax" (keyup)="checkPrice(priceMax)" placeholder="max Price">
        <button class="clearIcon" mat-button *ngIf="priceMax !== null && priceMin !== ''" matSuffix mat-icon-button (click)="priceMax = null; navigateTo()"><mat-icon>close</mat-icon></button>
      </mat-form-field>
      <mat-form-field>
        <input matInput [(ngModel)]="zipCode" (ngModelChange)="checkZip(zipCode)" placeholder="Zip code" name="location">
        <button class="clearIcon" mat-button *ngIf="zipCode !== ''" matSuffix mat-icon-button (click)="zipCode= ''; navigateTo()"><mat-icon>close</mat-icon></button>
      </mat-form-field>
      <div>
        <span class="radius">Radius:</span>
        <mat-slider class="slider" thumbLabel [displayWith]="formatLabel" tickInterval="1000" min="0" max="100" [(ngModel)]="radius" (change)="checkZip(zipCode)">{{radius}} km away from you</mat-slider>
      </div>

      <div class="filterButtonContainer">
        <button class="filterButton" mat-button (click)="clearFilter()">clear filter</button>
        <button class="filterButton" mat-button (click)="clickFilter = !clickFilter">more filter</button>
      </div>
    </div>
    <div class="moreFilter" *ngIf="clickFilter">
      <mat-radio-group [(ngModel)]="isService" name="isService">
        <span>Product Type:</span>
        <mat-radio-button *ngFor="let data of selection2" [value]="data.value" (click)="showService(data.value)">{{data.name}}</mat-radio-button>
      </mat-radio-group>
      <mat-radio-group [(ngModel)]="delivery" name="delivery">
        <span>Delivery:</span>
        <mat-radio-button *ngFor="let data of selection" [value]="data.value" (click)="showDelivery(data.value)">{{data.name}}</mat-radio-button>
      </mat-radio-group>
      <mat-radio-group [(ngModel)]="isRentable" name="isRentable">
        <span>Rentable:</span>
        <mat-radio-button *ngFor="let data of selection" [value]="data.value" (click)="showRenatble(data.value)">{{data.name}}</mat-radio-button>
      </mat-radio-group>
    </div>
  </div>


  <div class="smFilter">
    <mat-expansion-panel>
      <mat-expansion-panel-header>Filter</mat-expansion-panel-header>
      <mat-divider></mat-divider>
      <mat-form-field>
        <mat-label>Select Product Category</mat-label>
        <mat-select [(ngModel)]="category" (selectionChange)="navigateTo()" value="category">
          <mat-option [value]="">None</mat-option>
          <mat-option *ngFor="let category of categories" [value]="category.value">{{category.viewValue}}</mat-option>
        </mat-select>
      </mat-form-field>
      <br>
      <mat-form-field>
        <input matInput class="priceInput" [(ngModel)]="priceMin" (keyup)="checkPrice(priceMin)" placeholder="min Price">
        <button class="clearIcon" mat-button *ngIf="priceMin !== null && priceMin !== ''" matSuffix mat-icon-button (click)="priceMin = null; navigateTo()"><mat-icon>close</mat-icon></button>
      </mat-form-field>
      <mat-form-field>
        <input matInput class="priceInput" [(ngModel)]="priceMax" (keyup)="checkPrice(priceMax)" placeholder="max Price">
        <button class="clearIcon" mat-button *ngIf="priceMax !== null && priceMin !== ''" matSuffix mat-icon-button (click)="priceMax = null; navigateTo()"><mat-icon>close</mat-icon></button>
      </mat-form-field>
      <div>
      <mat-form-field>
        <input matInput [(ngModel)]="zipCode" (ngModelChange)="checkZip(zipCode)" placeholder="Zip code" name="location">
        <button class="clearIcon" mat-button *ngIf="zipCode !== ''" matSuffix mat-icon-button (click)="zipCode= ''; navigateTo()"><mat-icon>close</mat-icon></button>
      </mat-form-field>
        <mat-slider class="smSlider" thumbLabel [displayWith]="formatLabel" tickInterval="1000" min="0" max="100" [(ngModel)]="radius" (change)="checkZip(zipCode)">{{radius}} km away from you</mat-slider>
      </div>
      <div class="smRadio">
      <mat-radio-group [(ngModel)]="isService" name="isService" class="smRadioGroup">
        <span>Product Type:</span>
        <mat-radio-button *ngFor="let data of selection2" [value]="data.value" (click)="showService(data.value)">{{data.name}}</mat-radio-button>
      </mat-radio-group>
      <mat-radio-group [(ngModel)]="delivery" name="delivery" class="smRadioGroup">
        <span>Delivery:</span>
        <mat-radio-button *ngFor="let data of selection" [value]="data.value" (click)="showDelivery(data.value)">{{data.name}}</mat-radio-button>
      </mat-radio-group>
      <mat-radio-group [(ngModel)]="isRentable" name="isRentable" class="smRadioGroup">
        <span>Rentable:</span>
        <mat-radio-button *ngFor="let data of selection" [value]="data.value" (click)="showRenatble(data.value)">{{data.name}}</mat-radio-button>
      </mat-radio-group>
      </div>
      <div align="right">
        <button class="filterButton" mat-button (click)="clearFilter()">clear filter</button>
      </div>
    </mat-expansion-panel>
  </div>
</div>

<div class="filterChips">
  <mat-chip-list>
    <mat-chip *ngIf="category">{{category}}
      <button class="clearIcon" matSuffix mat-icon-button (click)="category = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="zipCode && zipCode.length === 4 && checkNumber(zipCode)">Zip Code: {{zipCode}}
      <button class="clearIcon" matSuffix mat-icon-button (click)="zipCode = ''; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="radius && zipCode.length === 4 && checkNumber(zipCode)">Radius: {{radius}} km
      <button class="clearIcon" matSuffix mat-icon-button (click)="radius = 0; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="priceMin && checkNumber(priceMin)">min Price: {{priceMin}} CHF
      <button class="clearIcon" matSuffix mat-icon-button (click)="priceMin = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="priceMax && checkNumber(priceMax)">max Price: {{priceMax}} CHF
      <button class="clearIcon" matSuffix mat-icon-button (click)="priceMax = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="delivery !== null">Delivery: {{delivery}}
      <button class="clearIcon" matSuffix mat-icon-button (click)="delivery = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="isRentable !== null">Rentable: {{isRentable}}
      <button class="clearIcon" matSuffix mat-icon-button (click)="isRentable = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="isService !== null && isService === true">Product type: Service
      <button class="clearIcon" matSuffix mat-icon-button (click)="isService = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
    <mat-chip *ngIf="isService !== null && isService === false">Product type: Product
      <button class="clearIcon" matSuffix mat-icon-button (click)="isService = null; navigateTo()"><mat-icon>close</mat-icon></button>
    </mat-chip>
  </mat-chip-list>
</div>
